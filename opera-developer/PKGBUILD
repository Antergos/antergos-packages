# Maintainer: Antergos Developers <dev@antergos.com>
# Contributor: Christian Hesse <mail@eworm.de>

pkgname=opera-developer
pkgver=32.0.1899.0
pkgrel=1
pkgdesc='A fast and secure web browser and Internet suite - developer stream'
arch=('i686' 'x86_64')
url='http://www.opera.com/browser/'
license=('custom:opera')
depends=('alsa-lib' 'nss' 'gtk2' 'gconf' 'libxss' 'libxtst' 'desktop-file-utils')
optdepends=(
	'ffmpeg: HTML5 H264 and mp3 playback'
	'curl: opera crash reporter and autoupdate checker'
)
install=opera.install
options=(!strip)
source_i686=("http://get.geo.opera.com/pub/${pkgname}/${pkgver}/linux/${pkgname}_${pkgver}_i386.deb")
source_x86_64=("http://get.geo.opera.com/pub/${pkgname}/${pkgver}/linux/${pkgname}_${pkgver}_amd64.deb")
sha256sums_i686=('6a8cebc47e2cfb121617f0c51f1974d74ef742037757fcca3a011c0f7341705a')
sha256sums_x86_64=('9cfad413d4f23f2881bf53bea94227e6dd6259c1461b80bdc216b8816ea6be46')

_arch=$CARCH
[[ "$CARCH" == "i686" ]] && _arch='i386'

#prepare() {
#}

package() {
	tar -xf data.tar.xz --exclude=usr/share/{lintian,menu} -C "$pkgdir/"

	# set suid bit for Opera sandbox
	chmod 4755 "${pkgdir}/usr/lib/${_arch}-linux-gnu/opera-developer/opera_sandbox"

	# license
	install -Dm644 \
		"$pkgdir/usr/share/doc/$pkgname/copyright" \
		"$pkgdir/usr/share/licenses/$pkgname/copyright"
}

